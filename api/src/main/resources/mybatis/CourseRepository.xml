<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="tvz.ntpr.ntprdbrestapi.repo.CourseRepository">
    <resultMap id="base" type="tvz.ntpr.api.entity.Course">
        <id column="id" jdbcType="VARCHAR" property="id"/>
        <result column="name" jdbcType="VARCHAR" property="name"/>
        <result column="ects" jdbcType="INTEGER" property="ects"/>
        <result column="professor" jdbcType="VARCHAR" property="professor"/>
    </resultMap>

    <insert id="create" parameterType="tvz.ntpr.api.entity.Course" keyProperty="id">
        INSERT
          INTO `course` (
                   `id`,
                   `name`,
                   `ects`,
                   `professor`
               )
        VALUES (
                   #{id,jdbcType=VARCHAR},
                   #{name,jdbcType=VARCHAR},
                   #{ects,jdbcType=INTEGER},
                   #{professor,jdbcType=VARCHAR}
               )
    </insert>

    <update id="update" parameterType="tvz.ntpr.api.entity.Course" keyProperty="id">
        UPDATE `course`
           SET `name`      = #{name,jdbcType=VARCHAR},
               `ects`      = #{ects,jdbcType=INTEGER},
               `professor` = #{professor,jdbcType=VARCHAR}
        <where>
               `id` = #{id,jdbcType=VARCHAR}
        </where>
    </update>

    <delete id="deleteById" parameterType="String">
        DELETE
          FROM `course`
        <where>
               `id` = #{id,jdbcType=VARCHAR}
        </where>
    </delete>

    <select id="findById" parameterType="String" resultMap="base">
        SELECT *
          FROM `course`
        <where>
               `id` = #{id,jdbcType=VARCHAR}
        </where>
    </select>

    <select id="findAll" resultMap="base">
        SELECT *
          FROM `course`
    </select>

    <select id="findByProfessorId" parameterType="String" resultMap="base">
        SELECT *
          FROM `course`
        <where>
               `professor` = #{professorId,jdbcType=VARCHAR}
        </where>
    </select>
</mapper>